import{f as K,N as M,s as V,r as L,p as m,X as Q,o as p,j as R,l as r,U as a,w as e,m as i,P as d,V as c,O as f,W as b,k as z,_ as q,a8 as k,a7 as I,Z as E,I as O,a1 as H,a2 as J}from"./vue-Y_0NT09C.js";import{e as w,s as n,g as W,j as X}from"./crud-MdgXnyJ0.js";import{F as Y}from"./index-3QkJ1XDU.js";import{b as Z}from"./validate-GlLPtrul.js";import{_ as A}from"./log.vue_vue_type_style_index_0_lang--9rIwDsY.js";import{_ as G}from"./index-r2_r-mqm.js";import"./index-fgu_EUqb.js";import"./index-VpFBqr7Z.js";const ee=_=>(H("data-v-956e4104"),_=_(),J(),_),te={class:"default-main"},se={class:"crud-title"},ae={class:"start-opt"},re={class:"start-item-title"},le={class:"start-item-remark"},oe={class:"start-item suspension"},de={class:"start-item-title"},ce={class:"start-item-remark"},ie={class:"start-item suspension"},ne={class:"start-item-title"},ue={class:"start-item-remark"},pe={target:"_blank",href:"https://wonderful-code.gitee.io/guide/other/developerMustSee.html",rel:"noopener noreferrer"},me=ee(()=>r("code",null,"test_build",-1)),fe={target:"_blank",href:"https://wonderful-code.gitee.io/guide/other/developerMustSee.html",rel:"noopener noreferrer"},_e=K({__name:"start",setup(_){const{t}=M(),x=V(),v=V(),l=L({dialog:{type:"",visible:!1,dbList:[]},showLog:!1,loading:!1,successRecord:0}),$=u=>{l.dialog.type=u,l.dialog.visible=!0,u=="sql"?setTimeout(()=>{x.value.focus()},200):u=="db"&&(l.successRecord=0,n.startData.db="",W().then(s=>{l.dialog.dbList=s.data.dbs}))},N=L({db:[Z({name:"required",message:t("crud.crud.Please select a data table")})]}),h=()=>{if(v.value){if(l.dialog.type=="sql"&&!n.startData.sql){O({type:"error",message:t("crud.crud.Please enter the table creation SQL")});return}v.value.validate(u=>{u&&w(l.dialog.type)})}},U=()=>{n.startData.db&&(l.loading=!0,X(n.startData.db).then(u=>{l.successRecord=u.data.id}).finally(()=>{l.loading=!1}))},P=()=>{l.successRecord&&(n.startData.logId=l.successRecord.toString(),w("log"))},B=()=>!1;return(u,s)=>{const g=m("el-col"),D=m("el-row"),S=m("el-alert"),F=m("el-input"),T=m("el-form"),y=m("el-button"),j=m("el-dialog"),C=Q("blur");return p(),R("div",te,[r("div",se,a(e(t)("crud.crud.start")),1),r("div",ae,[i(D,{gutter:20},{default:d(()=>[i(g,{xs:24,span:8},{default:d(()=>[r("div",{onClick:s[0]||(s[0]=o=>e(w)("create")),class:"start-item suspension"},[r("div",re,a(e(t)("crud.crud.create")),1),r("div",le,a(e(t)("crud.crud.New background CRUD from zero")),1)])]),_:1}),i(g,{onClick:s[1]||(s[1]=o=>$("db")),xs:24,span:8},{default:d(()=>[r("div",oe,[r("div",de,a(e(t)("crud.crud.Select Data Table")),1),r("div",ce,a(e(t)("crud.crud.Select a designed data table from the database")),1)])]),_:1}),i(g,{onClick:s[2]||(s[2]=o=>l.showLog=!0),xs:24,span:8},{default:d(()=>[r("div",ie,[r("div",ne,a(e(t)("crud.crud.CRUD record")),1),r("div",ue,a(e(t)("crud.crud.Start with previously generated CRUD code")),1)])]),_:1})]),_:1}),i(D,{justify:"center"},{default:d(()=>[i(g,{span:20,class:"ba-markdown crud-tips suspension"},{default:d(()=>[r("b",null,a(e(t)("crud.crud.Fast experience")),1),r("ol",null,[r("li",null,[c(a(e(t)("crud.crud.experience 1 1"))+" ",1),r("a",pe,a(e(t)("crud.crud.experience 1 2")),1),c(" "+a(e(t)("crud.crud.experience 1 3")),1)]),r("li",null,[c(a(e(t)("crud.crud.experience 2 1"))+" ",1),r("code",null,a(e(t)("crud.crud.experience 2 2")),1),c(" "+a(e(t)("crud.crud.experience 2 3")),1),me,c(a(e(t)("crud.crud.data sheet")),1)]),r("li",null,[c(a(e(t)("crud.crud.experience 3 1")),1),r("code",null,a(e(t)("crud.crud.experience 3 2")),1),c(" "+a(e(t)("crud.crud.experience 3 3"))+" ",1),r("code",null,a(e(t)("crud.crud.experience 3 4")),1)])]),B()?b("",!0):(p(),f(S,{key:0,class:"no-dev",type:"warning","show-icon":!0,closable:!1},{title:d(()=>[r("span",null,a(e(t)("crud.crud.experience 4 1")),1),r("a",fe,a(e(t)("crud.crud.experience 4 2")),1),r("span",null,[c(a(e(t)("crud.crud.experience 4 3")),1),r("code",null,a(e(t)("crud.crud.experience 4 4")),1)])]),_:1}))]),_:1})]),_:1}),i(j,{class:"ba-operate-dialog select-db-dialog",modelValue:l.dialog.visible,"onUpdate:modelValue":s[10]||(s[10]=o=>l.dialog.visible=o),title:l.dialog.type=="sql"?e(t)("crud.crud.Please enter SQL"):e(t)("crud.crud.Please select a data table"),"destroy-on-close":!0},{footer:d(()=>[r("div",{style:z({width:"calc(100% * 0.9)"})},[i(y,{onClick:s[8]||(s[8]=o=>l.dialog.visible=!1)},{default:d(()=>[c(a(u.$t("Cancel")),1)]),_:1}),q((p(),f(y,{loading:l.loading,onClick:s[9]||(s[9]=o=>h()),type:"primary"},{default:d(()=>[c(a(e(t)("Confirm")),1)]),_:1},8,["loading"])),[[C]]),l.successRecord?q((p(),f(y,{key:0,onClick:P,type:"success"},{default:d(()=>[c(a(e(t)("crud.crud.Start with the historical record")),1)]),_:1})),[[C]]):b("",!0)],4)]),default:d(()=>[i(T,{"label-width":140,onKeyup:s[7]||(s[7]=k(o=>h(),["enter"])),class:"select-db-form",ref_key:"formRef",ref:v,model:e(n).startData,rules:N},{default:d(()=>[l.dialog.type=="sql"?(p(),f(F,{key:0,class:"sql-input",prop:"sql",ref_key:"sqlInputRef",ref:x,modelValue:e(n).startData.sql,"onUpdate:modelValue":s[3]||(s[3]=o=>e(n).startData.sql=o),type:"textarea",placeholder:e(t)("crud.crud.table create SQL"),rows:10,onKeyup:[s[4]||(s[4]=k(I(()=>{},["stop"]),["enter"])),s[5]||(s[5]=k(I(o=>h(),["ctrl"]),["enter"]))]},null,8,["modelValue","placeholder"])):l.dialog.type=="db"?(p(),R(E,{key:1},[(p(),f(Y,{label:e(t)("crud.crud.data sheet"),class:"select-db",modelValue:e(n).startData.db,"onUpdate:modelValue":s[6]||(s[6]=o=>e(n).startData.db=o),type:"select",key:JSON.stringify(l.dialog.dbList),placeholder:e(t)("crud.crud.Please select a data table"),data:{content:l.dialog.dbList},attr:{blockHelp:e(t)("crud.crud.data sheet help")},"input-attr":{onChange:U},prop:"db"},null,8,["label","modelValue","placeholder","data","attr","input-attr"])),l.successRecord?(p(),f(S,{key:0,class:"success-record-alert",title:e(t)("crud.crud.The selected table has already generated records You are advised to start with historical records"),"show-icon":!0,closable:!1,type:"warning"},null,8,["title"])):b("",!0)],64)):b("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),i(A,{modelValue:l.showLog,"onUpdate:modelValue":s[11]||(s[11]=o=>l.showLog=o)},null,8,["modelValue"])])])}}}),De=G(_e,[["__scopeId","data-v-956e4104"]]);export{De as default};
